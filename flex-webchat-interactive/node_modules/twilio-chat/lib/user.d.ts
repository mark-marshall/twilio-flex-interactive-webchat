/// <reference types="node" />
import { EventEmitter } from 'events';
import { Session } from './session';
import { SyncClient } from 'twilio-sync';
export interface UserServices {
    session: Session;
    syncClient: SyncClient;
}
declare namespace User {
    type SubscriptionState = 'initializing' | 'subscribed' | 'unsubscribed';
    type UpdateReason = 'friendlyName' | 'attributes' | 'online' | 'notifiable';
    interface UpdatedEventArgs {
        user: User;
        updateReasons: User.UpdateReason[];
    }
}
/**
 * @classdesc Extended user information.
 * Note that <code>online</code> and <code>notifiable</code> properties are eligible
 * to use only if reachability function is enabled.
 * You may check if it is enabled by reading value of {@link Client}'s <code>reachabilityEnabled</code> property.
 *
 * @property {String} identity - User identity
 * @property {String} friendlyName - User friendly name, null if not set
 * @property {Object} attributes - Object with custom attributes for user
 * @property {Boolean} online - User real-time channel connection status
 * @property {Boolean} notifiable - User push notification registration status
 *
 * @fires User#updated
 * @fires User#userSubscribed
 * @fires User#userUnsubscribed
 *
 * @constructor
 * @param {String} identity - Identity of user
 * @param {String} entityId - id of user's object
 * @param {Object} datasync - datasync service
 * @param {Object} session - session service
 */
declare class User extends EventEmitter {
    private entity;
    private services;
    private state;
    private promiseToFetch;
    private subscribed;
    /**
     * The update reason for <code>updated</code> event emitted on User
     * @typedef {('friendlyName' | 'attributes' | 'online' | 'notifiable')} User#UpdateReason
     */
    constructor(identity: string, entityName: string, services: UserServices);
    get identity(): string;
    set identity(identity: string);
    set entityName(name: string);
    get attributes(): Object;
    get friendlyName(): string;
    get online(): boolean;
    get notifiable(): boolean;
    get isSubscribed(): boolean;
    _update(key: string, value: any): void;
    _updateReachabilityInfo(map: any, update: any): any;
    _fetch(): Promise<User>;
    _ensureFetched(): Promise<User>;
    /**
     * Updates user attributes.
     * @param {Object} attributes - Updated attributes
     * @returns {Promise<User|Error|SessionError>}
     */
    updateAttributes(attributes: any): Promise<this>;
    /**
     * Update Users friendlyName.
     * @param {String} friendlyName - Updated friendlyName
     * @returns {Promise<User|Error|SessionError>}
     */
    updateFriendlyName(friendlyName: any): Promise<this>;
    /**
     * Removes User from subscription list.
     * @returns {Promise<void>} Promise of completion
     */
    unsubscribe(): Promise<void>;
}
export { User };
/**
 * Fired when User's properties or reachability status have been updated.
 * @event User#updated
 * @type {Object}
 * @property {User} user - Updated User
 * @property {User#UpdateReason[]} updateReasons - Array of User's updated event reasons
 */
/**
 * Fired when Client is subscribed to User.
 * @event User#userSubscribed
 * @type {User}
 */
/**
 * Fired when Client is unsubscribed from this User.
 * @event User#userUnsubscribed
 * @type {User}
 */
