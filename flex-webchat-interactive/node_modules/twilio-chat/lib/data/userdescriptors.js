"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = require("../util/index");
const restpaginator_1 = require("../restpaginator");
const userdescriptor_1 = require("../userdescriptor");
class UserDescriptors {
    constructor(services, url) {
        this.services = services;
        this.url = url;
    }
    async getUserDescriptor(identity) {
        const url = new index_1.UriBuilder(this.url).path(identity).build();
        let response = await this.services.network.get(url);
        return new userdescriptor_1.UserDescriptor(this.services, response.body);
    }
    async getChannelUserDescriptors(channelSid, args = {}) {
        const url = new index_1.UriBuilder(this.url)
            .arg('ChannelSid', channelSid).arg('PageToken', args.pageToken)
            .build();
        let response = await this.services.network.get(url);
        return new restpaginator_1.RestPaginator(response.body.users.map(x => new userdescriptor_1.UserDescriptor(this.services, x)), pageToken => this.getChannelUserDescriptors(channelSid, { pageToken }), response.body.meta.prev_token, response.body.meta.next_token);
    }
}
exports.UserDescriptors = UserDescriptors;
