{"ast":null,"code":"import _regeneratorRuntime from \"/Users/mmarshall/Desktop/ps-webchat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mmarshall/Desktop/ps-webchat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/mmarshall/Desktop/ps-webchat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mmarshall/Desktop/ps-webchat/src/App.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport * as FlexWebChat from '@twilio/flex-webchat-ui';\nimport customState from './store/state';\nimport customReducer from './store/reducers/customReducer';\nimport ClickableMessages from './components/clickableMessages';\n\nvar App = function App(_ref) {\n  var configuration = _ref.configuration;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      manager = _useState2[0],\n      setManager = _useState2[1];\n\n  useEffect(function () {\n    getManager();\n  }, []); // useEffect(() => {\n  //   if (manager && manager.chatClient) {\n  //     //   manager.chatClient.on('messageAdded', (event) => {\n  //     //     console.log(event);\n  //     FlexWebChat.MessageList.Content.add(<Components key=\"components\" />, {});\n  //     //   });\n  //   }\n  // }, [manager]);\n\n  var getManager = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var manager;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return FlexWebChat.Manager.create(configuration);\n\n            case 2:\n              manager = _context.sent;\n              // manager.store.subscribe(() => {\n              //   const store = manager.store.getState();\n              //   const activeChannel = Object.keys(store.flex.chat.channels)[0];\n              //   const messageList = store.flex.chat.channels[activeChannel];\n              //   console.log(messageList.messages);\n              // });\n              // manager.store.WebchatReducer((state) => console.log(state));\n              // Chat client - > handle reconnections etc.\n              // Redux state but we can't directly hook up to the redux store\n              // FlexWebChat.Actions.on('afterStartEngagement', (payload) => {\n              //   console.log('start');\n              // });\n              // FlexWebChat.Actions.on('afterRestartEngagement', (payload) => {\n              //   console.log('restart');\n              //   FlexWebChat.MessageList.Content);\n              // });\n              customState.addReducer('custom', customReducer);\n              manager.store.replaceReducer(customState.combinedReducers());\n              FlexWebChat.MessageList.Content.add( /*#__PURE__*/React.createElement(ClickableMessages, {\n                key: \"interactives\",\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 48,\n                  columnNumber: 7\n                }\n              }));\n              setManager(manager);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getManager() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, manager ? /*#__PURE__*/React.createElement(FlexWebChat.ContextProvider, {\n    manager: manager,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, \"hi\"), /*#__PURE__*/React.createElement(FlexWebChat.RootContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"...\"));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/mmarshall/Desktop/ps-webchat/src/App.js"],"names":["React","useEffect","useState","FlexWebChat","customState","customReducer","ClickableMessages","App","configuration","manager","setManager","getManager","Manager","create","addReducer","store","replaceReducer","combinedReducers","MessageList","Content","add"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,KAAKC,WAAZ,MAA6B,yBAA7B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AACA,OAAOC,iBAAP,MAA8B,gCAA9B;;AAEA,IAAMC,GAAG,GAAG,SAANA,GAAM,OAAuB;AAAA,MAApBC,aAAoB,QAApBA,aAAoB;;AAAA,kBACHN,QAAQ,CAAC,IAAD,CADL;AAAA;AAAA,MAC1BO,OAD0B;AAAA,MACjBC,UADiB;;AAGjCT,EAAAA,SAAS,CAAC,YAAM;AACdU,IAAAA,UAAU;AACX,GAFQ,EAEN,EAFM,CAAT,CAHiC,CAOjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,UAAU;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACKR,WAAW,CAACS,OAAZ,CAAoBC,MAApB,CAA2BL,aAA3B,CADL;;AAAA;AACXC,cAAAA,OADW;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACAL,cAAAA,WAAW,CAACU,UAAZ,CAAuB,QAAvB,EAAiCT,aAAjC;AACAI,cAAAA,OAAO,CAACM,KAAR,CAAcC,cAAd,CAA6BZ,WAAW,CAACa,gBAAZ,EAA7B;AAEAd,cAAAA,WAAW,CAACe,WAAZ,CAAwBC,OAAxB,CAAgCC,GAAhC,eACE,oBAAC,iBAAD;AAAmB,gBAAA,GAAG,EAAC,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF;AAIAV,cAAAA,UAAU,CAACD,OAAD,CAAV;;AA5BiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVE,UAAU;AAAA;AAAA;AAAA,KAAhB;;AA+BA,sBACE,0CACGF,OAAO,gBACN,oBAAC,WAAD,CAAa,eAAb;AAA6B,IAAA,OAAO,EAAEA,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAEE,oBAAC,WAAD,CAAa,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADM,gBAMN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAPJ,CADF;AAYD,CA3DD;;AA6DA,eAAeF,GAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport * as FlexWebChat from '@twilio/flex-webchat-ui';\nimport customState from './store/state';\nimport customReducer from './store/reducers/customReducer';\nimport ClickableMessages from './components/clickableMessages';\n\nconst App = ({ configuration }) => {\n  const [manager, setManager] = useState(null);\n\n  useEffect(() => {\n    getManager();\n  }, []);\n\n  // useEffect(() => {\n  //   if (manager && manager.chatClient) {\n  //     //   manager.chatClient.on('messageAdded', (event) => {\n  //     //     console.log(event);\n  //     FlexWebChat.MessageList.Content.add(<Components key=\"components\" />, {});\n  //     //   });\n  //   }\n  // }, [manager]);\n\n  const getManager = async () => {\n    const manager = await FlexWebChat.Manager.create(configuration);\n    // manager.store.subscribe(() => {\n    //   const store = manager.store.getState();\n    //   const activeChannel = Object.keys(store.flex.chat.channels)[0];\n    //   const messageList = store.flex.chat.channels[activeChannel];\n    //   console.log(messageList.messages);\n    // });\n    // manager.store.WebchatReducer((state) => console.log(state));\n\n    // Chat client - > handle reconnections etc.\n    // Redux state but we can't directly hook up to the redux store\n\n    // FlexWebChat.Actions.on('afterStartEngagement', (payload) => {\n    //   console.log('start');\n    // });\n\n    // FlexWebChat.Actions.on('afterRestartEngagement', (payload) => {\n    //   console.log('restart');\n    //   FlexWebChat.MessageList.Content);\n    // });\n    customState.addReducer('custom', customReducer);\n    manager.store.replaceReducer(customState.combinedReducers());\n\n    FlexWebChat.MessageList.Content.add(\n      <ClickableMessages key=\"interactives\" />\n    );\n\n    setManager(manager);\n  };\n\n  return (\n    <>\n      {manager ? (\n        <FlexWebChat.ContextProvider manager={manager}>\n          <button>hi</button>\n          <FlexWebChat.RootContainer />\n        </FlexWebChat.ContextProvider>\n      ) : (\n        <div>...</div>\n      )}\n    </>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}