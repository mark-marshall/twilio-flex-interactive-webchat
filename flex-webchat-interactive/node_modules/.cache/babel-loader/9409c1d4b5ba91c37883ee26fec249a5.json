{"ast":null,"code":"import _slicedToArray from \"/Users/mmarshall/Desktop/twilio-flex-interactive-webchat/flex-webchat-interactive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { formatMuiErrorMessage as _formatMuiErrorMessage } from \"@mui/utils\";\nimport * as React from 'react';\nimport { unstable_useForkRef as useForkRef } from '@mui/utils';\nimport useFormControl from '../FormControlUnstyled/useFormControl';\nimport extractEventHandlers from '../utils/extractEventHandlers';\nexport default function useInput(props, inputRef) {\n  var defaultValue = props.defaultValue,\n      _props$disabled = props.disabled,\n      disabledProp = _props$disabled === void 0 ? false : _props$disabled,\n      _props$error = props.error,\n      errorProp = _props$error === void 0 ? false : _props$error,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      _props$required = props.required,\n      requiredProp = _props$required === void 0 ? false : _props$required,\n      valueProp = props.value;\n  var formControlContext = useFormControl();\n  var value;\n  var required;\n  var disabled;\n  var error;\n\n  if (formControlContext) {\n    var _formControlContext$d, _formControlContext$r, _formControlContext$e;\n\n    value = formControlContext.value;\n    disabled = (_formControlContext$d = formControlContext.disabled) != null ? _formControlContext$d : false;\n    required = (_formControlContext$r = formControlContext.required) != null ? _formControlContext$r : false;\n    error = (_formControlContext$e = formControlContext.error) != null ? _formControlContext$e : false;\n  } else {\n    value = valueProp;\n    disabled = disabledProp;\n    required = requiredProp;\n    error = errorProp;\n  }\n\n  var _React$useRef = React.useRef(value != null),\n      isControlled = _React$useRef.current;\n\n  var handleInputRefWarning = React.useCallback(function (instance) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (instance && instance.nodeName !== 'INPUT' && !instance.focus) {\n        console.error(['MUI: You have provided a `components.Input` to the input component', 'that does not correctly handle the `ref` prop.', 'Make sure the `ref` prop is called with a HTMLInputElement.'].join('\\n'));\n      }\n    }\n  }, []);\n  var internalInputRef = React.useRef(null);\n  var handleIncomingRef = useForkRef(inputRef, handleInputRefWarning);\n  var handleInputRef = useForkRef(internalInputRef, handleIncomingRef);\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      focused = _React$useState2[0],\n      setFocused = _React$useState2[1]; // The blur won't fire when the disabled state is set on a focused input.\n  // We need to book keep the focused state manually.\n\n\n  React.useEffect(function () {\n    if (!formControlContext && disabled && focused) {\n      setFocused(false); // @ts-ignore\n\n      onBlur == null ? void 0 : onBlur();\n    }\n  }, [formControlContext, disabled, focused, onBlur]);\n\n  var handleFocus = function handleFocus(otherHandlers) {\n    return function (event) {\n      var _otherHandlers$onFocu; // Fix a bug with IE11 where the focus/blur events are triggered\n      // while the component is disabled.\n\n\n      if (formControlContext != null && formControlContext.disabled) {\n        event.stopPropagation();\n        return;\n      }\n\n      (_otherHandlers$onFocu = otherHandlers.onFocus) == null ? void 0 : _otherHandlers$onFocu.call(otherHandlers, event);\n\n      if (formControlContext && formControlContext.onFocus) {\n        var _formControlContext$o;\n\n        formControlContext == null ? void 0 : (_formControlContext$o = formControlContext.onFocus) == null ? void 0 : _formControlContext$o.call(formControlContext);\n      } else {\n        setFocused(true);\n      }\n    };\n  };\n\n  var handleBlur = function handleBlur(otherHandlers) {\n    return function (event) {\n      var _otherHandlers$onBlur;\n\n      (_otherHandlers$onBlur = otherHandlers.onBlur) == null ? void 0 : _otherHandlers$onBlur.call(otherHandlers, event);\n\n      if (formControlContext && formControlContext.onBlur) {\n        formControlContext.onBlur();\n      } else {\n        setFocused(false);\n      }\n    };\n  };\n\n  var handleChange = function handleChange(otherHandlers) {\n    return function (event) {\n      var _otherHandlers$onChan2;\n\n      var _formControlContext$o2, _otherHandlers$onChan;\n\n      if (!isControlled) {\n        var element = event.target || internalInputRef.current;\n\n        if (element == null) {\n          throw new Error(process.env.NODE_ENV !== \"production\" ? \"MUI: Expected valid input target. Did you use a custom `components.Input` and forget to forward refs? See https://mui.com/r/input-component-ref-interface for more info.\" : _formatMuiErrorMessage(17));\n        }\n      }\n\n      formControlContext == null ? void 0 : (_formControlContext$o2 = formControlContext.onChange) == null ? void 0 : _formControlContext$o2.call(formControlContext, event); // @ts-ignore\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      (_otherHandlers$onChan = otherHandlers.onChange) == null ? void 0 : (_otherHandlers$onChan2 = _otherHandlers$onChan).call.apply(_otherHandlers$onChan2, [otherHandlers, event].concat(args));\n    };\n  };\n\n  var handleClick = function handleClick(otherHandlers) {\n    return function (event) {\n      var _otherHandlers$onClic;\n\n      if (internalInputRef.current && event.currentTarget === event.target) {\n        internalInputRef.current.focus();\n      }\n\n      (_otherHandlers$onClic = otherHandlers.onClick) == null ? void 0 : _otherHandlers$onClic.call(otherHandlers, event);\n    };\n  };\n\n  var getRootProps = function getRootProps(externalProps) {\n    // onBlur, onChange and onFocus are forwarded to the input slot.\n    var propsEventHandlers = extractEventHandlers(props, ['onBlur', 'onChange', 'onFocus']);\n\n    var externalEventHandlers = _extends({}, propsEventHandlers, extractEventHandlers(externalProps));\n\n    return _extends({}, externalProps, externalEventHandlers, {\n      onClick: handleClick(externalEventHandlers)\n    });\n  };\n\n  var getInputProps = function getInputProps(externalProps) {\n    var propsEventHandlers = {\n      onBlur: onBlur,\n      onChange: onChange,\n      onFocus: onFocus\n    };\n\n    var externalEventHandlers = _extends({}, propsEventHandlers, extractEventHandlers(externalProps));\n\n    var mergedEventHandlers = _extends({}, externalProps, externalEventHandlers, {\n      onBlur: handleBlur(externalEventHandlers),\n      onChange: handleChange(externalEventHandlers),\n      onFocus: handleFocus(externalEventHandlers)\n    });\n\n    return _extends({}, mergedEventHandlers, {\n      'aria-invalid': error || undefined,\n      defaultValue: defaultValue,\n      ref: handleInputRef,\n      value: value,\n      required: required,\n      disabled: disabled\n    });\n  };\n\n  return {\n    disabled: disabled,\n    error: error,\n    focused: focused,\n    formControlContext: formControlContext,\n    getInputProps: getInputProps,\n    getRootProps: getRootProps,\n    required: required,\n    value: value\n  };\n}","map":null,"metadata":{},"sourceType":"module"}