import { Dispatch } from "redux";
import * as TwilioChat from "twilio-chat";
import * as actions from "./sessionStateActions";
import * as constants from "../constants/session";
import { TokenPayload } from "../TokenHelper";
/**
 * Session state interface
 * @category State
 * @interface SessionState
 * @property {string} identity - id of the current user
 * @property {boolean} isEntryPointExpanded - Whether the chat window is expanded or not
 * @property {string} channelSid - Chat channel Sid
 * @property {SessionState.EngagementStage} engagementStage - Stage of the engagement
 * @property {boolean} ignorePersisted - Whether ignore previous chat sessions are on page refresh or not
 * @property {Map<string, string>} avatars - Map of user avatars from 'avatar' property of chat users
 * @property {SessionState.TokenPayload} tokenPayload - Token payload
 */
export interface SessionState {
    readonly identity: string;
    readonly isEntryPointExpanded: boolean;
    readonly channelSid: string;
    readonly taskSid: string;
    readonly engagementStage: constants.EngagementStage;
    readonly ignorePersisted: boolean;
    readonly avatars: Map<string, string>;
    readonly tokenPayload: TokenPayload;
}
export declare function reduce(state: SessionState, action: actions.SessionStateAction): SessionState;
export declare class Actions {
    private static _dispatcher;
    static get dispatcher(): Dispatch<any>;
    static set dispatcher(dispatcher: Dispatch<any>);
    /**
     * Toggles entry point expansion
     * by loading/unloading the chat from module
     * @returns {ToggleEntryPoint}
     * @private
     */
    static toggleEntryPoint(): actions.ToggleEntryPoint;
    /**
     * Sets the task sid
     * @param {string} taskSid
     * @returns {SetTaskSid}
     * @private
     */
    static setTaskSid(taskSid: string): actions.SetTaskSid;
    /**
     * Sets the engagement state to pre | in | post
     * @param {EngagementStage} engagementStage
     * @returns {SetEngagementStage}
     * @private
     */
    static setEngagementStage(engagementStage: constants.EngagementStage): actions.SetEngagementStage;
    /**
     * Sets isEntryPointExpanded
     * @returns {SetEntryPointExpanded}
     * @private
     */
    static setEntryPointExpanded(isEntryPointExpanded: boolean): actions.SetEntryPointExpanded;
    /**
     * Updates the identity of the customer in the state
     * @param {string} identity
     * @returns {SetIdentity}
     * @private
     */
    static setIdentity(identity: string): actions.SetIdentity;
    static setChannelSid(channelSid: string): actions.SetChannelSid;
    /**
     * Updates the accessToken in the state
     * @param {string} accessToken
     * @returns {SetAccessToken}
     * @private
     */
    static setAccessToken(accessToken: TokenPayload): actions.SetAccessToken;
    static setDisableLocalStorage(): actions.SetDisableLocalStorage;
    static setAvatar(identity: string, avatar: string): actions.SetAvatar;
    static initClients(friendlyName?: string): Promise<void>;
    static shutdown(): void;
    static entryPointClick(): Promise<void>;
    static getChatClient(token: string): Promise<TwilioChat.Client>;
    static getAgentAvatar(identity: string): string;
    static initSession(): Promise<void>;
    static defaultStartup(): Promise<void>;
    /**
     * Calls the startEngagement url
     *  We expect that any form post info has already been added to config.context
     *  The startEngagement call can return tokens and channelSids and roomSids
     * @returns Promise<string>
     * @private
     */
    static startEngagement(formData: Record<string, string>, startingEngagementStage?: constants.EngagementStage): Promise<string>;
    static updateEngagement(data: any, propertyName: string): Promise<any>;
    /**
     * Cancel task and go back to pre-engagement screen
     * Fire and forget. User does not care if cancellation was successful
     * @private
     */
    static cancelTask(): void;
    static closeClick(): void;
}
